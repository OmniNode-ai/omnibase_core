---
contract_kind: validation_subcontract
validation:
  version:
    major: 1
    minor: 0
    patch: 0
  validator_id: patterns
  validator_name: ONEX Pattern Validator
  validator_description: |
    Validates code patterns for ONEX compliance including Pydantic model patterns,
    naming conventions, and generic anti-patterns.

    Checks performed:
    - Pydantic models must start with 'Model' prefix
    - UUID fields should use UUID type, not str
    - Category/type/status fields should use enums
    - Functions should not have too many parameters
    - Classes should not have too many methods (god class)
    - Function names should use snake_case
    - Class names should use PascalCase
    - Avoid overly generic function names

  target_patterns:
    - "**/*.py"

  exclude_patterns:
    - "**/node_modules/**"
    - "**/.git/**"
    - "**/venv/**"
    - "**/.venv/**"
    - "**/__pycache__/**"
    - "**/archived/**"
    - "**/examples/**"
    - "**/tests/fixtures/**"

  rules:
    - rule_id: pydantic_model_prefix
      description: Pydantic models must start with 'Model' prefix
      severity: warning
      enabled: true

    - rule_id: uuid_field_type
      description: UUID fields should use UUID type, not str
      severity: warning
      enabled: true

    - rule_id: enum_field_type
      description: Category/type/status fields should use enums
      severity: warning
      enabled: true

    - rule_id: entity_name_pattern
      description: Fields ending with _name might reference entities
      severity: info
      enabled: true

    - rule_id: generic_function_name
      description: Avoid overly generic function names like process, handle, execute
      severity: warning
      enabled: true

    - rule_id: max_parameters
      description: Functions should not have more than 5 parameters
      severity: warning
      enabled: true
      parameters:
        max_params: 5

    - rule_id: god_class
      description: Classes should not have more than 10 methods
      severity: warning
      enabled: true
      parameters:
        max_methods: 10

    - rule_id: class_anti_pattern
      description: Avoid generic class name terms like Manager, Handler, Helper
      severity: warning
      enabled: true

    - rule_id: class_pascal_case
      description: Class names should use PascalCase
      severity: warning
      enabled: true

    - rule_id: function_snake_case
      description: Function names should use snake_case
      severity: warning
      enabled: true

  suppression_comments:
    - "# ONEX_EXCLUDE:"
    - "# noqa: pattern"
    - "# pattern-ok:"
    - "# type: ignore"

  severity_default: warning
  fail_on_error: true
  fail_on_warning: false
  max_violations: 0
  parallel_execution: true
