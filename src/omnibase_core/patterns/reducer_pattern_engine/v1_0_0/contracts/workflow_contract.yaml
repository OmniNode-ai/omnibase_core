# Workflow Contract - Reducer Pattern Engine
# Defines workflow processing behavior and specifications

name: "workflow_processing"
version: "1.0.0"
description: "Workflow processing contract for multi-workflow execution"

# Workflow Types
workflow_types:
  data_analysis:
    type: "DATA_ANALYSIS"
    input_schema: "WorkflowRequest"
    output_schema: "SubreducerResult"
    processing_model: "statistical_analysis"
    capabilities:
      - "descriptive_statistics"
      - "correlation_analysis"
      - "trend_analysis"
      - "distribution_analysis"

  report_generation:
    type: "REPORT_GENERATION"
    input_schema: "WorkflowRequest"
    output_schema: "SubreducerResult"
    processing_model: "template_based"
    capabilities:
      - "json_output"
      - "html_output"
      - "csv_output"
      - "txt_output"
      - "markdown_output"

  document_regeneration:
    type: "DOCUMENT_REGENERATION"
    input_schema: "WorkflowRequest"
    output_schema: "SubreducerResult"
    processing_model: "transformation_based"
    capabilities:
      - "template_processing"
      - "content_transformation"
      - "format_conversion"

# Processing Requirements
processing_requirements:
  isolation_level: "instance_based"
  concurrent_processing: true
  state_persistence: true
  error_recovery: true

  timeouts:
    single_operation_ms: 30000
    batch_operation_s: 300
    initialization_s: 60
    cleanup_s: 30

  resource_limits:
    memory_mb: 512
    cpu_percent: 50
    max_payload_size_mb: 10

# Routing Configuration
routing:
  algorithm: "hash_based"
  load_balancing: true
  sticky_sessions: false
  failure_handling: "retry_different_instance"

  hash_configuration:
    hash_function: "sha256"
    hash_fields: ["workflow_type", "instance_id"]
    distribution_strategy: "consistent_hashing"

# Quality of Service
qos:
  availability: "99.5%"
  latency_p95_ms: 5000
  latency_p99_ms: 15000
  throughput_min_ops_per_second: 10
  error_rate_max_percent: 1.0
