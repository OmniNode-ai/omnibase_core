# ONEX Tool Manifest - Infrastructure Reducer
# Tier 2: Tool-level metadata and lifecycle management

# === TOOL IDENTITY ===
tool_name: "tool_infrastructure_reducer"
description: "ONEX infrastructure reducer implementing finite state machine patterns for tool state management"
author: "ONEX Framework Team"
created_date: "2025-08-23T00:00:00Z"
last_modified_date: "2025-08-23T12:00:00Z"

# === TOOL CLASSIFICATION ===
node_type: "REDUCER"
business_logic_pattern: "aggregation"
meta_type: "tool"
runtime_language_hint: "python>=3.11"

# === TOOL STATUS ===
status: "active"
lifecycle: "active"

# === VERSION CATALOG ===
current_stable_version:
  major: 1
  minor: 0
  patch: 0
  prerelease: ""
  build: ""

current_development_version: null

versions:
  - version:
      major: 1
      minor: 0
      patch: 0
      prerelease: ""
      build: ""
    status: "active"
    release_date: "2025-08-23T00:00:00Z"
    breaking_changes: false
    recommended: true
    deprecation_date: null
    end_of_life_date: null
    changelog: "Initial ONEX reducer implementation for finite state machine patterns"

# === CAPABILITIES ===
capabilities:
  - name: "finite_state_machine"
    description: "Implement finite state machine patterns for infrastructure state management"
    input_types: ["ModelStateRequest"]
    output_types: ["ModelStateResult"]
    operations: ["manage_state", "process_transitions", "validate_state"]

  - name: "state_transitions"
    description: "Handle state transitions with guards and validation"
    input_types: ["ModelTransitionRequest"]
    output_types: ["ModelTransitionResult"]
    operations: ["execute_transition", "validate_transition", "guard_transition"]

  - name: "event_processing"
    description: "Process events for state machine operations"
    input_types: ["ModelEventRequest"]
    output_types: ["ModelEventResult"]
    operations: ["process_event", "aggregate_events", "project_state"]

protocols_supported: ["protocol_reducer", "protocol_onex_validation"]

# === DEPENDENCIES ===
dependencies:
  - name: "onex_container"
    type: "service"
    target: "omnibase.core.onex_container"
    binding: "injection"
    optional: false
    description: "ONEX dependency injection container"
    version_requirement: ">=1.0.0"

  - name: "event_bus_adapter"
    type: "service"
    target: "omnibase.core.adapters.adapter_bus_shim"
    binding: "injection"
    optional: false
    description: "Event bus communication adapter"
    version_requirement: ">=1.0.0"

  - name: "pytest"
    type: "library"
    target: "pytest"
    binding: "import"
    optional: true
    description: "Testing framework for development"
    version_requirement: ">=7.0.0"

# === SERVICE INTEGRATION ===
integration:
  auto_load_strategy: "current_stable"
  fallback_versions: [{major: 1, minor: 0, patch: 0}]
  version_directory_pattern: "v{major}_{minor}_{patch}"
  implementation_file: "node.py"
  contract_file: "contract.yaml"
  main_class_name: "InfrastructureReducer"
  load_as_module: true
  requires_separate_port: false
  initialization_order: 6
  shutdown_timeout: 30
  health_check_via_service: true

# === EXECUTION METADATA ===
execution_mode: "async"
max_memory_mb: 256
max_cpu_percent: 40
timeout_seconds: 300

# === TESTING CONFIGURATION ===
testing:
  required_ci_tiers: ["unit", "integration"]
  minimum_coverage_percentage: 90.0
  canonical_test_case_ids: ["reducer_finite_state_machine", "reducer_state_transitions", "reducer_event_processing"]
  performance_test_required: false
  security_test_required: true

# === SECURITY CONFIGURATION ===
security:
  processes_sensitive_data: false
  data_classification: "internal"
  requires_network_access: false
  external_endpoints: []
  security_profile_required: "SP0_BOOTSTRAP"

# === METADATA VALIDATION ===
schema_version:
  major: 1
  minor: 0
  patch: 0
  prerelease: ""
  build: ""
uuid: null
hash: null
