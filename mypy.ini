[mypy]
# ONEX MyPy Configuration - Optimized for Maximum Type Safety
# Aligned with omnibase_3 parent project standards
# Updated for Python 3.12 with strict typing enforcement
# Last optimized: 2025-09-20

python_version = 3.12

# Error reporting
# Temporarily disable to handle git dependency import issues
warn_return_any = False
warn_unused_configs = True
# Allow redundant casts for type clarity
warn_redundant_casts = False
# Allow unused ignores for flexibility
warn_unused_ignores = False
warn_no_return = True
warn_unreachable = True

# Type checking strictness
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
# Allow untyped decorators for Pydantic validators
disallow_untyped_decorators = False
disallow_any_unimported = False
disallow_any_expr = False
disallow_any_decorated = False
disallow_any_explicit = False
disallow_any_generics = True
# Temporarily disable to handle git dependency import issues
disallow_subclassing_any = False

# Optional handling
no_implicit_optional = True
strict_optional = True

# Miscellaneous strictness
strict_equality = True
extra_checks = True
show_error_codes = True
enable_error_code = unused-awaitable

# Handle third-party imports
ignore_missing_imports = True

# Exclude archived directories and duplicate scripts to avoid module conflicts
exclude = (?x)(
    ^archived/.*$ |
    ^archive/.*$ |
    ^scripts/validate-contracts\.py$ |
    ^scripts/validate-no-backward-compatibility\.py$ |
    ^scripts/validate-no-manual-yaml\.py$ |
    ^scripts/validate-pydantic-patterns\.py$ |
    ^scripts/validate-string-versions\.py$ |
    ^scripts/validate-union-usage\.py$
    )

# Per-module overrides for specific patterns
# Tests are allowed to be less strict for rapid development and mocking
[mypy-tests.*]
disallow_untyped_defs = False
disallow_any_generics = False

# Scripts are utility code and can be less strict for simplicity
[mypy-scripts.*]
disallow_untyped_defs = False
disallow_any_generics = False

# OPTIMIZATION NOTE: Removed Pydantic model overrides
# Pydantic decorators (@field_validator, @model_validator, @field_serializer, @computed_field)
# now work properly with strict typing in modern Pydantic versions (2.0+)
# Previous overrides for disallow_untyped_decorators and warn_return_any are no longer needed
